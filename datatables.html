<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>DataTables</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.datatables.net/1.13.8/css/dataTables.bootstrap5.min.css" rel="stylesheet">
    <link href="https://cdn.datatables.net/buttons/2.4.2/css/buttons.bootstrap5.min.css" rel="stylesheet">
    <link href="https://cdn.datatables.net/select/1.7.0/css/select.bootstrap5.min.css" rel="stylesheet">

    <style>
        div.dataTables_paginate {
            float: none !important;
            text-align: center !important;
        }
        div.dataTables_info {
            margin-top: 5px;
        }
    </style>
</head>
<body class="p-4">

<div class="container">
    <h3 class="mb-3">AJAX DataTables</h3>

    <ul class="nav nav-tabs">
        <li class="nav-item">
            <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#tab1">Table 1</button>
        </li>
        <li class="nav-item">
            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#tab2">Table 2</button>
        </li>
    </ul>

    <div class="tab-content mt-3">
        <div class="tab-pane fade show active" id="tab1">
            <button id="deleteRow1" class="btn btn-danger mb-2">Delete Selected Row</button>
            <table id="table1" class="table table-striped">
                <thead>
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Username</th>
                    <th>Email</th>
                    <th>City</th>
                    <th>Company</th>
                    <th>Nationality</th>
                </tr>
                </thead>
                <tfoot>
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Username</th>
                    <th>Email</th>
                    <th>City</th>
                    <th>Company</th>
                    <th>Nationality</th>
                </tr>
                </tfoot>
            </table>
        </div>

        <div class="tab-pane fade" id="tab2">
            <button id="deleteRow2" class="btn btn-danger mb-2">Delete Selected Row</button>
            <table id="table2" class="table table-striped">
                <thead>
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Username</th>
                    <th>Email</th>
                    <th>City</th>
                    <th>Company</th>
                    <th>Nationality</th>
                </tr>
                </thead>
                <tfoot>
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Username</th>
                    <th>Email</th>
                    <th>City</th>
                    <th>Company</th>
                    <th>Nationality</th>
                </tr>
                </tfoot>
            </table>
        </div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script src="https://cdn.datatables.net/1.13.8/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.8/js/dataTables.bootstrap5.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.4.2/js/dataTables.buttons.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.4.2/js/buttons.colVis.min.js"></script>
<script src="https://cdn.datatables.net/select/1.7.0/js/dataTables.select.min.js"></script>

<script>
function createTable(id) {
    return $('#' + id).DataTable({
        ajax: {
            url: 'https://jsonplaceholder.typicode.com/users',
            dataSrc: function (data) {
                return data.map(d => ({
                    id: d.id,
                    name: d.name,
                    username: d.username,
                    email: d.email,
                    city: d.address.city,
                    company: d.company.name,
                    nationality: 'Unknown'
                }));
            }
        },
        columns: [
            { data: 'id' },
            { data: 'name' },
            { data: 'username' },
            { data: 'email' },
            { data: 'city' },
            { data: 'company' },
            { data: 'nationality' }
        ],
        select: 'single',
        dom: 't<"row mt-2"<"col-4"l><"col-4 text-center"i><"col-4"p>>B',
        buttons: ['colvis'],
        initComplete: function () {
            this.api().columns().every(function () {
                let input = $('<input class="form-control form-control-sm" placeholder="Search">')
                    .appendTo($(this.footer()).empty())
                    .on('keyup change', () => this.search(input.val()).draw());
            });
        }
    });
}

const table1 = createTable('table1');
const table2 = createTable('table2');

$('#deleteRow1').on('click', () => table1.row({ selected: true }).remove().draw(false));
$('#deleteRow2').on('click', () => table2.row({ selected: true }).remove().draw(false));
</script>

</body>
</html>
